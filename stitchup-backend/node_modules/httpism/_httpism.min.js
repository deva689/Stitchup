!function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=r[s]={exports:{}};e[s][0].call(p.exports,function(t){var r=e[s][1][t];return o(r?r:t)},p,p.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,r){function n(t,e){return t.body instanceof Object&&(t.body=JSON.stringify(t.body),l.setHeaderTo(t,"content-type","application/json")),l.setHeaderTo(t,"accept","application/json"),e().then(function(e){return l.shouldParseAs(e,"json",t)&&(e.body=JSON.parse(e.body,t.options.jsonReviver)),e})}function o(t,e){return"string"==typeof t.body&&l.setHeaderTo(t,"content-type","text/plain;charset=UTF-8"),e()}function i(t,e){return t.options.form&&t.body instanceof Object&&(s(t,y.stringify(t.body)),l.setHeaderTo(t,"content-type","application/x-www-form-urlencoded")),e().then(function(e){return l.shouldParseAs(e,"form",t)&&(e.body=y.parse(e.body)),e})}function s(t,e){t.body=e}function a(t){for(var e={},r=t.split("\n"),n=0;n<r.length;n++){var o=r[n],i=/^(.*?):(.*)/.exec(o);i&&(e[i[1].toLowerCase()]=i[2].trim())}return e}function u(t,e){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n];e.setRequestHeader(o,t[o])}}function c(t,e){var r=location.origin,n=t.responseURL;return n?n.substring(0,r.length)==r?n.substring(r.length):n:e}function p(t){function e(){n.abort();var e=new Error("aborted connection to "+t.method+" "+t.url);e.aborted=!0,r(e)}var r,n=new XMLHttpRequest,o=new Promise(function(e,o){r=o,n.open(t.method,t.url,!0),n.onload=function(r){var o=n.status,i={body:204==o?void 0:n.responseText,headers:a(n.getAllResponseHeaders()),statusCode:o,url:c(n,t.url),xhr:n,statusText:n.statusText};e(i)},n.onerror=function(e){r(new Error("failed to connect to "+t.method+" "+t.url))},f(t.url)||t.headers["x-requested-with"]||(t.headers["x-requested-with"]="XMLHttpRequest"),u(t.headers,n),n.withCredentials=!!t.options.withCredentials,n.send(t.body)});return d(o,e),o}function f(t){return/^https?:\/\//.test(t)}function d(t,e){var r=t.then;t.then=function(){var t=r.apply(this,arguments);return t.abort=e,d(t,e),t}}var h=t("./httpism"),l=t("./middlewareUtils"),y=!1;e.exports=h(void 0,{},[l.exception,i,n,o,l.querystring,p])},{"./httpism":2,"./middlewareUtils":4}],2:[function(t,e,r){function n(t,e,r){return new o(t,e,r)}function o(t,e,r){this.url=t,this._options=e,this.middlewares=r}function i(t){return Object.keys(t).forEach(function(e){var r=e.toLowerCase();e.toLowerCase()!=e&&(t[r]=t[e],delete t[e])}),t}function s(t,e){return l.extend(new o(t.url,t._options,t.middlewares),e)}function a(t,e){for(var r=0;r<t.length;r++){if(t[r].middleware==e.before)return void t.splice(r,0,e);if(t[r].middleware==e.after)return void t.splice(r+1,0,e)}throw new Error("no such middleware: "+(e.before||e.after))}function u(t,e){var r=t.slice();return e.forEach(function(t){t.before||t.after?a(r,t):r.unshift(t)}),r}function c(t){o.prototype[t]=function(e,r){return this.send(t,e,void 0,r,this)}}function p(t){o.prototype[t]=function(e,r,n){return this.send(t,e,r,n,this)}}function f(t,e){return t?f(t,e):e}function d(){for(var t,e,r,n=0;n<arguments.length;n++){var o=arguments[n];"string"==typeof o?t=o:"function"==typeof o?r=[o]:o instanceof Array?r=o:o instanceof Object&&(e=o)}return{url:t,options:e,middlewares:r}}var h=t("./merge"),f=t("./resolveUrl"),l=t("./middlewareUtils");o.prototype.send=function(t,e,r,n,o){function a(t,e){if(t<p.middlewares.length){var r=p.middlewares[t];return r(e,function(r){return a(t+1,r||e)},p)}}var u=h(n,this._options),c={method:t,url:f(this.url,e),headers:i(u.headers||{}),body:r,options:u},p=this;return a(0,c).then(function(t){return s(p,t)},function(t){if(t.redirectResponse)return t.redirectResponse;throw t})},o.prototype.api=function(t,e,r){var n=d(t,e,r);return new o(f(this.url,n.url),h(n.options,this._options),n.middlewares?u(this.middlewares,n.middlewares):this.middlewares)},c("get"),c("delete"),c("head"),p("post"),p("put"),p("patch"),p("options"),e.exports=n},{"./merge":3,"./middlewareUtils":4,"./resolveUrl":5}],3:[function(t,e,r){e.exports=function(t,e){if(t&&e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),Object.keys(t).forEach(function(e){r[e]=t[e]}),r}return e?e:t}},{}],4:[function(t,e,r){function n(t,e){var r=new RegExp("^\\s*"+e+"\\s*($|;)");return r.test(t.headers["content-type"])}function o(t){return n(t,"text/.*")}function i(t,e){for(var r=Object.keys(e),n=0;n<r.length;n++){var o=r[n];t[o]=e[o]}return t}var s=t("./merge"),a=!1;e.exports.setHeaderTo=function(t,e,r){return t.headers[e]?void 0:t.headers[e]=r};var u={json:function(t){return n(t,"application/json")},text:function(t){return o(t)||n(t,"application/javascript")},form:function(t){return n(t,"application/x-www-form-urlencoded")},stream:function(t){return!1}};e.exports.shouldParseAs=function(t,e,r,n){void 0!==n&&n.hasOwnProperty(n,"contentType")&&void 0!==n.contentType?n.contentType:void 0;if(r.options.responseBody)return e===r.options.responseBody;var o=u[e];return o?o(t):void 0},r.extend=i,r.exception=function(t,e){return e().then(function(e){if(e.statusCode>=400&&t.options.exceptions!==!1){var r=t.method.toUpperCase()+" "+t.url+" => "+e.statusCode+" "+e.statusText,n=i(new Error(r),e);throw n}return e})},r.querystring=function(t,e){if(t.options.querystring instanceof Object){var r=t.url.split("?"),n=r[0],o=a.parse(r[1]),i=s(t.options.querystring,o);t.url=n+"?"+a.stringify(i)}return e()}},{"./merge":3}],5:[function(t,e,r){function n(t){var e=String(t).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return e?{href:e[0]||"",protocol:e[1]||"",authority:e[2]||"",host:e[3]||"",hostname:e[4]||"",port:e[5]||"",pathname:e[6]||"",search:e[7]||"",hash:e[8]||""}:null}e.exports=function(t,e){function r(t){var e=[];return t.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(t){"/.."===t?e.pop():e.push(t)}),e.join("").replace(/^\//,"/"===t.charAt(0)?"/":"")}return e=n(e||""),t=n(t||""),e&&t?(e.protocol||t.protocol)+(e.protocol||e.authority?e.authority:t.authority)+r(e.protocol||e.authority||"/"===e.pathname.charAt(0)?e.pathname:e.pathname?(t.authority&&!t.pathname?"/":"")+t.pathname.slice(0,t.pathname.lastIndexOf("/")+1)+e.pathname:t.pathname)+(e.protocol||e.authority||e.pathname?e.search:e.search||t.search)+e.hash:null}},{}]},{},[1]);
